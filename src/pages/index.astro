---
import Navbar from '../components/Navbar.astro';
import HeroSection from '../sections/HeroSection.astro';
import AboutSection from '../sections/AboutSection.astro';
import ServicesSection from '../sections/ServicesSection.astro';
import GalleryShowcase from '../ui/GalleryShowcase.astro';
import TestimonialCarousel from '../ui/TestimonialCarousel.astro';
import ServiceAreaSection from '../sections/ServiceAreaSection.astro';
import BusinessDetailsSection from '../sections/BusinessDetailsSection.astro';
import FooterSection from '../sections/FooterSection.astro';
import CompanyOverviewSection from '../sections/CompanyOverviewSection.astro';
import FAQSection from '../sections/FAQSection.astro';
import '../styles/global.css';
import { sanityClient } from 'sanity:client';
import ServiceHighlights from '../sections/ServiceHighlights.astro';
import PreFooterSection from '../sections/PreFooterSection.astro';

const templateId = import.meta.env.TEMPLATE_ID;
const documentId = import.meta.env.DOCUMENT_ID;

const doc = await sanityClient.fetch(
  `*[_type == "sanity-astro-template" && templateId == $templateId && documentId == $documentId][0]`,
  { templateId, documentId }
);
const heroTitle = doc?.content?.heroTitle ?? 'n/a';

const testimonials = [
      {
        image: 'https://randomuser.me/api/portraits/men/32.jpg',
        name: 'James Thompson',
        role: 'Founder',
        company: 'GrowthLab',
        link: '#',
        industry: 'Digital Marketing',
        text: 'From day one, this plumbing service exceeded our expectations. The team was prompt, professional, and solved our issues quickly. Highly recommended!',
        verified: true
      },
      {
        name: 'Maria Anderson',
        role: 'Homeowner',
        company: '',
        industry: 'Residential',
        text: 'The technicians were friendly and explained everything thoroughly. I felt confident in their expertise and the results speak for themselves.',
        verified: true
      },
      {
        image: 'https://randomuser.me/api/portraits/women/44.jpg',
        name: 'Felicia Garrett',
        role: 'Office Manager',
        company: 'Acme Corp',
        link: '#',
        industry: 'Commercial',
        text: 'We had a major leak at our office and AquaFlow responded immediately. The repairs were done efficiently and with minimal disruption.',
        verified: false
      },
      {
        image: 'https://randomuser.me/api/portraits/men/32.jpg',
        name: 'James Thompson',
        role: 'Founder',
        company: 'GrowthLab',
        link: '#',
        industry: 'Digital Marketing',
        text: 'From day one, this plumbing service exceeded our expectations. The team was prompt, professional, and solved our issues quickly. Highly recommended!',
        verified: true
      },
      {
        name: 'Maria Anderson',
        role: 'Homeowner',
        company: '',
        industry: 'Residential',
        text: 'The technicians were friendly and explained everything thoroughly. I felt confident in their expertise and the results speak for themselves.',
        verified: true
      },
      {
        image: 'https://randomuser.me/api/portraits/women/44.jpg',
        name: 'Felicia Garrett',
        role: 'Office Manager',
        company: 'Acme Corp',
        link: '#',
        industry: 'Commercial',
        text: 'We had a major leak at our office and AquaFlow responded immediately. The repairs were done efficiently and with minimal disruption.',
        verified: false
      }
    ]
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AquaFlow Plumbing Services</title>
    <meta name="description" content="Reliable plumbing services for homes and businesses. 24/7 certified experts for repairs, installations, and emergencies." />
    <!-- Open Graph / SEO Placeholders -->
    <meta property="og:title" content="AquaFlow Plumbing Services" />
    <meta property="og:description" content="Reliable plumbing services for homes and businesses. 24/7 certified experts for repairs, installations, and emergencies." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yourdomain.com" />
    <meta property="og:image" content="/favicon.svg" />
    <link rel="icon" href="/favicon.svg" />
  </head>
  <body>
    <Navbar />
    <HeroSection heroTitle={heroTitle} />
    <ServiceHighlights />
    <CompanyOverviewSection />
    <AboutSection />
    <ServicesSection />
    <GalleryShowcase items={[
      {
        image: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80',
        heading: 'Modern Bathroom Remodel',
        description: 'A complete transformation with new fixtures, tiling, and water-saving technology.',
        cta: { label: 'View Project', href: '#' }
      },
      {
        image: 'https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80',
        heading: 'Eco-Friendly Installations',
        description: 'Sustainable plumbing solutions for a greener home.',
        cta: { label: 'Learn More', href: '#' }
      },
      {
        image: 'https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=800&q=80',
        heading: 'Emergency Leak Repair',
        description: 'Rapid response and expert repair for urgent plumbing issues.',
        cta: { label: 'See Details', href: '#' }
      },
      {
        image: 'https://images.unsplash.com/photo-1520880867055-1e30d1cb001c?auto=format&fit=crop&w=800&q=80',
        heading: 'Pipe Replacement Project',
        description: 'Upgrading old pipes for improved safety and efficiency.',
        cta: { label: 'Our Process', href: '#' }
      },
      {
        image: 'https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?auto=format&fit=crop&w=800&q=80',
        heading: 'Commercial Plumbing Success',
        description: 'Reliable solutions for offices, restaurants, and businesses.',
        cta: { label: 'See Portfolio', href: '#' }
      },
    ]} />
    <BusinessDetailsSection 
    latitude={32.7157}
    longitude={-117.1611}
    locationName="San Diego, CA"
  />
  <TestimonialCarousel id="testimonials" testimonials={testimonials} />
    <FAQSection />
    <ServiceAreaSection />
    <PreFooterSection/>
    <FooterSection />
  </body>
</html>
