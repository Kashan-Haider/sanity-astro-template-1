---


const { items = [] } = Astro.props;
---
<section
  id="gallery"
  class="w-full py-20 px-4 bg-gradient-to-br from-primary via-dark/80 to-secondary"
  x-data={`{ selected: 0, items: ${JSON.stringify(items)} }`}
  x-init="selected = 0"
>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <div class="max-w-7xl mx-auto">
    <h2 class="text-4xl md:text-5xl font-extrabold text-center mb-4 text-light">Gallery Highlights</h2>
    <p class="text-lg text-center mb-12 text-light/70 max-w-2xl mx-auto">Explore our recent projects and see the difference our team makes. Each gallery item features a unique solution and a story of success.</p>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Featured item -->
      <template x-if="items[selected]">
        <div class="md:row-span-2 md:col-span-2 relative group overflow-hidden rounded-3xl shadow-2xl min-h-[350px] transition-all duration-500">
          <img 
            :src="items[selected].image" 
            :alt="items[selected].heading" 
            class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" 
            loading="lazy" 
          />
        </div>
      </template>
      <!-- Thumbnails -->
      <div class="flex flex-col gap-8">
        <template x-for="(item, i) in items" :key="i">
          <button type="button"
            class="relative group overflow-hidden rounded-2xl shadow-xl min-h-[160px] outline-none focus:ring-2 focus:ring-secondary transition-all duration-300"
            :class="{ 'ring-4 ring-secondary': selected === i }"
            @click="selected = i"
            :aria-label="item.heading"
            :tabindex="selected === i ? -1 : 0">
            <img 
              :src="item.image" 
              :alt="item.heading" 
              class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" 
              loading="lazy" 
            />
            <span x-show="selected === i" class="absolute inset-0 ring-4 ring-secondary rounded-2xl pointer-events-none transition-all duration-300"></span>
          </button>
        </template>
      </div>
    </div>
  </div>
</section> 
